May 14，Thursday, 36pages | Reading: Section 1.1 - 1.4 
### 0. Computer Startup
A `bootstrap program` is loaded at power-up or reboot
* Typically stored in ROM or EPROM，generally knowns as *firmware* （固件）
* Initializes all aspects of the system
* Loads operating system kernel and starts execution
### 1. Computer System Organization (1.2)
- One or more CPUs and a number of device controllers connected through a common bus that provides access between components and shared memory.
- Each device controller is in charge of a specific type of device ( e.g. a disk drive, audio device, or graphics display)
  * The device controller is responsible for moving the data between the peripheral devices that it controls and its `local buffer storage`
- OS have `device driver`, for each device controller.
  * device driver understands the device controller and provides the rest of the operating system with a uniform interface to the device.
![computerSystem](/imgs/computerSystem.jpeg)
### 2. Interrupts (Section 1.2.1)
* We want the `I/O devices` and the `CPU` to be able to execute concurrently
  - The CPU should not have to wait for the MUCH slower I/O device
* The I/O device signals an *interrupt* when it is ready
  - alert the CPU to events that require attention
  
* Interrupts must be handled quickly, as they occur very frequently
  - A table of pointers to interrupt routines can be used instead to speed up
  - The table of pointers is stored in low memory, hold the addresses of the interrupt service routines for devices
* When an interrupt occurs, the OS must:
  - Transfer control to the appropriate interrupt handler
  - Since there is more than one device, we use an `interrupt vector`
    * an array of addresses indexed by a unique number given with the interrupt request
    * to provide the address of the interrupt service routine for the interrupting device
#### 2.1 Interrupts: Controllers vs. Handlers
- A `device controller (hardware/firmware)` is responsible for moving data between the media and its own local registers
- An `interrupt handler (software)` is responsible for moving data between the controller registers and memory so it can be accessed by the user program
  - Since there are multiple types of interrupts, there is a handler for each type
#### 2.2 Processing an Interrupt
* 1. User program has control
* 2. I/O interrupt occurs
* 3. User program no longer processed by the CPU
* 4. Control transferred to interrupt handler
* 5. Data transferred from controller to memory or from memory to controller depending on whether input or output operation
* 6. CPU registers restored
* 7. Control returned to user program
### 3. I/O Structure (Sec 1.2.3)
- The CPU and device controllers operate in parallel
- Two types of I/O operations:
  * synchronous (同步的）
  * asynchronous(异步的)
- Asynchronicity is essential for multiprogramming
- Asynchronous I/O for program A allows the CPU to transfer control to another program B until I/O for A is complete
#### 3.1 Device Status Table
#### 3.2 DMA (Direct Memory Access)

### 4. Storage Structure
* Typical (von Neumann) instruction - execution cycle
  * Instruction loaded from main memory into CPU
    * Main Memory
  * Instruction decoded
* Secondary Storage - extension of main memory that provides large nonvolatile storage capacity

#### 4.1 Magnetic Disks
![]()
#### 4.2 Solid-State Drives
#### 4.3 Caching
![Storage Hierarchy]()

### 5. Types of System
#### 5.1 Mainframe Systems
#### 5.1.1 Multiprogrammed Batch System
#### 5.1.2 OS features for Multiprogramming
#### 5.2 Desktop Systems
#### 5.3 Multiprocessor Systems
